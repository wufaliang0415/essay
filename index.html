<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Essay by wufaliang0415</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Essay</h1>
      <h2 class="project-tagline">个人随笔</h2>
      <a href="https://github.com/wufaliang0415/essay" class="btn">View on GitHub</a>
      <a href="https://github.com/wufaliang0415/essay/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/wufaliang0415/essay/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="编码规范" class="anchor" href="#%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>编码规范</h2>

<ol>
<li>类名和文件必须一致，一个文件的代码不能超过1000行，一个函数的代码不能超过100行，一个函数的参数不能超过6个。</li>
<li>类需要注释，public函数放在文件的最上面，private函数放在文件的最下方。</li>
<li>private函数和变量必须以下划线开头。</li>
<li>函数名、变量名、类型、文件名必须采用峰驼式，类名、文件名必须首字母大写，函数名和变量名必须首字母小写。</li>
<li>对于变量名的要求，必须将变量类型写在名字前面，作为前缀。
<code>
$objUserMode = new UserMode();
$strUserName = 'luce';
$arrParams = array('name' =&gt; 'name1');
$boolRes = true;
$intUserId = 4;
$jsonData = "['name':'name1']";
</code>
</li>
<li>调用的函数或接口时，如果有返回值，必须对返回值进行处理。</li>
<li>一个函数如果有返回值，必须在最后统一返回，禁止多个返回埋点。</li>
<li>禁止使用绝对路径，可以考虑使用：_LIB_ROOT、_PATH_ROOT连接的方式。</li>
<li>代码中禁止出现针对调整PHP错误级别的函数：error_reporting及时区的控制。</li>
<li>代码中禁止出现明文的域名、IP、或端口， 全部走配置流来处理。</li>
<li>
<p>关于空格的使用，见例子：</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">UserMode</span>() {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">private</span> <span class="pl-smi">$_objAssetMode</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">contruct</span>() {</span>
<span class="pl-s1">        <span class="pl-smi">$_objAssetMode</span> <span class="pl-k">=</span> <span class="pl-c1">core</span><span class="pl-k">::</span>Singleton(<span class="pl-s"><span class="pl-pds">"</span>library.moduel.UserMode<span class="pl-pds">"</span></span>);</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getUserInfo</span>(<span class="pl-smi">$intUserId</span>, <span class="pl-smi">$strEmail</span>) {</span>
<span class="pl-s1">        <span class="pl-smi">$arrUserInfo</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">_objUserDb</span><span class="pl-k">-&gt;</span>select();</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getUserList</span>(<span class="pl-smi">$arrWhere</span>, <span class="pl-smi">$arrFiled</span> <span class="pl-k">=</span> <span class="pl-c1">array</span>()) {</span>
<span class="pl-s1">        <span class="pl-smi">$arrUserList</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">_objUserDb</span><span class="pl-k">-&gt;</span>select();</span>
<span class="pl-s1">        <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-c1">empty</span>(<span class="pl-smi">$arrUserList</span>)) {</span>
<span class="pl-s1">            <span class="pl-k">foreach</span> (<span class="pl-smi">$arrUserList</span> <span class="pl-k">as</span> <span class="pl-smi">$key</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">$value</span>) {</span>
<span class="pl-s1">                <span class="pl-smi">$arrUserList</span>[<span class="pl-smi">$key</span>][<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-k">!</span><span class="pl-c1">empty</span>(<span class="pl-smi">$value</span>) ? <span class="pl-smi">$value</span> : <span class="pl-s"><span class="pl-pds">'</span>default name<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">                <span class="pl-k">if</span> (<span class="pl-c1">1</span> <span class="pl-k">==</span> <span class="pl-smi">$value</span>[<span class="pl-s"><span class="pl-pds">'</span>status<span class="pl-pds">'</span></span>]) {</span>
<span class="pl-s1">                    <span class="pl-smi">$statusInfo</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">_objStatus</span><span class="pl-k">-&gt;</span>getUserInfo(<span class="pl-smi">$value</span>[<span class="pl-s"><span class="pl-pds">'</span>status<span class="pl-pds">'</span></span>]);</span>
<span class="pl-s1">                } <span class="pl-k">elseif</span> (<span class="pl-c1">2</span> <span class="pl-k">==</span> <span class="pl-smi">$value</span>[<span class="pl-s"><span class="pl-pds">'</span>status<span class="pl-pds">'</span></span>]) {</span>
<span class="pl-s1">                    <span class="pl-c">//do that</span></span>
<span class="pl-s1">                } <span class="pl-k">else</span> {</span>
<span class="pl-s1">                    <span class="pl-c">//do else</span></span>
<span class="pl-s1">                }</span>
<span class="pl-s1">            }</span>
<span class="pl-s1">        }</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-smi">$arrUserList</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">private</span> <span class="pl-k">function</span> <span class="pl-en">_doUserInfoData</span>(<span class="pl-smi">$arrUserData</span>) {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>
</li>
<li>代码中禁止直接拼接SQL的方式(特殊场景除外)。</li>
<li>禁止关联表查询。</li>
<li>每个C层的接口必须有一个与之相对应的私有的过滤函数，来处理参数过滤问题。（视情况而定，如果参数过少，可以在方法体内过滤）</li>
<li>vendor层不能操作DB。</li>
<li>module、job层不操作接口。</li>
</ol>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/wufaliang0415/essay">Essay</a> is maintained by <a href="https://github.com/wufaliang0415">wufaliang0415</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
